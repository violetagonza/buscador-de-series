"use strict";const btn=document.querySelector(".js-btn"),input=document.querySelector(".js-input");function handlebtn(){event.preventDefault(),getData()}let searchResults=[];function getData(){fetch(`http://api.tvmaze.com/search/shows?q=${input.value}`).then(t=>t.json()).then(t=>{searchResults=t,paintResults()})}function paintResults(){const t=document.querySelector(".js-list");t.innerHTML="";let e="";for(let t=0;t<searchResults.length;t++)e+=`<li id="${searchResults[t].show.id}" class="card--normal js-card"> ${searchResults[t].show.name}`,null===searchResults[t].show.image?e+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/? text=TV" alt="${searchResults[t].show.name}"></li>`:e+=`<img src="${searchResults[t].show.image.medium}" alt="${searchResults[t].show.name}"></li>`;t.innerHTML=e,listenCards()}btn.addEventListener("click",handlebtn);let favs=[];function paintFavs(){const t=document.querySelector(".js-fav-list");let e="";for(let t=0;t<favs.length;t++)e+=`<li>${favs[t].name}`,e+=`<img src="${favs[t].imgurl}" alt="${favs[t].name}"></li>`;t.innerHTML=e}function handleCard(t){t.currentTarget.classList.contains("card--normal")?(t.currentTarget.classList.remove("card--normal"),t.currentTarget.classList.add("card--fav")):t.currentTarget.classList.contains("card--fav")&&(t.currentTarget.classList.remove("card--fav"),t.currentTarget.classList.add("card--normal"));const e=t.target.id;console.log(e);let s=findShowforFavs(e,searchResults);favs.push({id:s.show.id,name:s.show.name,imgurl:"https://via.placeholder.com/210x295/ffffff/666666/? text=TV"}),console.log(s),console.log(favs),paintFavs(),setInLocalStorage()}function listenCards(){const t=document.querySelectorAll(".js-card");for(const e of t)e.addEventListener("click",handleCard)}function findShowforFavs(t,e){for(const s of e)if(s.show.id===parseInt(t))return s}function getFromLS(){const t=localStorage.getItem("favorite shows");null!==t&&(favs=JSON.parse(t),paintFavs())}function setInLocalStorage(){localStorage.setItem("favorite shows",JSON.stringify(favs))}getFromLS();